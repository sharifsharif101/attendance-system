---
description: ุฏููู ุชุฌููุฒ ุงููุธุงู ููุชุณููู ููุนููู
---

# ุฏููู ุชุฌููุฒ ูุธุงู ุงูุญุถูุฑ ูุงูุบูุงุจ ููุชุณููู ููุนููู

## ๐ ูุธุฑุฉ ุนุงูุฉ
ูุฐุง ุงูุฏููู ููุถุญ ุงูุจูุงูุงุช ุงูุชู ูุฌุจ ูุณุญูุง/ุงูุงุญุชูุงุธ ุจูุง ุนูุฏ ุชุณููู ุงููุธุงู ูุนููู ุฌุฏูุฏ.

---

## โ ุงูุจูุงูุงุช ุงูุชู ูุฌุจ **ุงูุงุญุชูุงุธ** ุจูุง (ูุง ุชูุณุญ)

### 1. **ุงูุฃุฏูุงุฑ ูุงูุตูุงุญูุงุช** (ุฌุฏุงูู: `roles`, `permissions`, `role_has_permissions`)
   - โ **ุงุญุชูุธ**: ูุฐู ุจูุงูุงุช ุฃุณุงุณูุฉ ูููุธุงู
   - ุงูุฃุฏูุงุฑ: admin, manager, general_supervisor, supervisor, data_entry, auditor
   - ุงูุตูุงุญูุงุช: attendance.*, reports.*, audit.*, users.*, roles.*, departments.*

### 2. **ุญุงูุงุช ุงูุญุถูุฑ** (ุฌุฏูู: `attendance_statuses`)
   - โ **ุงุญุชูุธ**: ุงูุจูุงูุงุช ุงูุฃุณุงุณูุฉ (ุญุงุถุฑุ ุบุงุฆุจุ ูุชุฃุฎุฑุ ูุณุชุฃุฐูุ ุฅุฌุงุฒุฉ)
   - โ๏ธ **ุชุญูู**: ุฅุฐุง ูุงู ุงูุนููู ุฃุถุงู ุญุงูุงุช ูุฎุตุตุฉ ุฃุฎุฑูุ ุงุญุฐู ุงูุชุฌุฑูุจูุฉ ููุท

### 3. **ุงูุฅุนุฏุงุฏุงุช ุงูุนุงูุฉ** (ุฌุฏูู: `settings`)
   - โ **ุงุญุชูุธ**: ุฅุนุฏุงุฏุงุช ุงููุธุงู ุงูุฃุณุงุณูุฉ
   - ูุซู: ุฃูุงู ุงูุฃุณุจูุนุ ุณุงุนุงุช ุงูุนููุ ุฅูุฎ

---

## ๐๏ธ ุงูุจูุงูุงุช ุงูุชู ูุฌุจ **ูุณุญูุง** ูุจู ุงูุชุณููู

### 1. **ุงููุณุชุฎุฏููู ุงูุชุฌุฑูุจููู** (ุฌุฏูู: `users`)
   ```sql
   -- ุงูุณุญ ุงููุณุชุฎุฏู ุงูุชุฌุฑูุจู
   DELETE FROM users WHERE email = 'admin@admin.com';
   
   -- ุฃู ุงูุณุญ ุฌููุน ุงููุณุชุฎุฏููู (ุณูุญุชุงุฌ ุงูุนููู ูุฅูุดุงุก ูุณุชุฎุฏู admin ุฌุฏูุฏ)
   TRUNCATE TABLE users;
   TRUNCATE TABLE department_user;
   TRUNCATE TABLE model_has_roles;
   ```
   - โ๏ธ **ููู**: ุฅุฐุง ูุณุญุช ุฌููุน ุงููุณุชุฎุฏูููุ ุณูุญุชุงุฌ ุงูุนููู ูุชุดุบูู:
     ```bash
     php artisan tinker
     ```
     ุซู:
     ```php
     $admin = User::create([
         'name' => 'ุงุณู ุงููุฏูุฑ',
         'email' => 'email@domain.com',
         'password' => Hash::make('ูููุฉ_ูุฑูุฑ_ูููุฉ')
     ]);
     $admin->assignRole('admin');
     ```

### 2. **ุงูุฃูุณุงู ุงูุชุฌุฑูุจูุฉ** (ุฌุฏูู: `departments`)
   ```sql
   -- ุงูุณุญ ุงูุฃูุณุงู ุงูุชุฌุฑูุจูุฉ
   DELETE FROM departments WHERE code IN ('IT', 'HR', 'FIN');
   
   -- ุฃู ุงูุณุญ ุฌููุน ุงูุฃูุณุงู
   TRUNCATE TABLE departments;
   TRUNCATE TABLE department_user;
   ```
   - ุงูุนููู ุณูุถูู ุฃูุณุงูู ุงูุฎุงุตุฉ

### 3. **ุงูููุธููู ุงูุชุฌุฑูุจููู** (ุฌุฏูู: `employees`)
   ```sql
   -- ุงูุณุญ ุฌููุน ุงูููุธููู ุงูุชุฌุฑูุจููู
   TRUNCATE TABLE employees;
   ```
   - ุงูููุธููู ุงูุชุฌุฑูุจููู: EMP001 ุฅูู EMP007

### 4. **ุณุฌูุงุช ุงูุญุถูุฑ** (ุฌุฏูู: `attendance_records`)
   ```sql
   -- ุงูุณุญ ุฌููุน ุณุฌูุงุช ุงูุญุถูุฑ ุงูุชุฌุฑูุจูุฉ
   TRUNCATE TABLE attendance_records;
   ```
   - ูุฐู ุงูุจูุงูุงุช ููุชุทููุฑ/ุงูุงุฎุชุจุงุฑ ููุท

### 5. **ุณุฌูุงุช ุงูุฃูุงู ุงูููููุฉ** (ุฌุฏูู: `day_locks`)
   ```sql
   -- ุงูุณุญ ุฌููุน ุนูููุงุช ููู ุงูุฃูุงู
   TRUNCATE TABLE day_locks;
   ```

### 6. **ุงูุฅุนุฏุงุฏุงุช ุงูุดูุฑูุฉ ุงูุชุฌุฑูุจูุฉ** (ุฌุฏูู: `monthly_settings`)
   ```sql
   -- ุงูุณุญ ุงูุฅุนุฏุงุฏุงุช ุงูุดูุฑูุฉ ุงูุชุฌุฑูุจูุฉ
   TRUNCATE TABLE monthly_settings;
   ```
   - ุงูุนููู ุณูุถุจุท ุฅุนุฏุงุฏุงุชู ุงูุดูุฑูุฉ

### 7. **ุงูุนุทูุงุช ุงูุฑุณููุฉ ุงูุชุฌุฑูุจูุฉ** (ุฌุฏูู: `official_holidays`)
   ```sql
   -- ุงูุณุญ ุงูุนุทูุงุช ุงูุฑุณููุฉ ุงูุชุฌุฑูุจูุฉ
   TRUNCATE TABLE official_holidays;
   ```
   - ุงูุนููู ุณูุฏุฎู ุนุทูุงุชู ุงูุฑุณููุฉ

### 8. **ุณุฌู ุชุงุฑูุฎ ุงูุชุบููุฑุงุช** (ุฌุฏูู: `attendance_status_history`)
   ```sql
   -- ุงูุณุญ ุณุฌู ุงูุชุบููุฑุงุช
   TRUNCATE TABLE attendance_status_history;
   ```

### 9. **ุณุฌูุงุช ุงููุดุงุท** (ุฌุฏูู: `activity_log`)
   ```sql
   -- ุงูุณุญ ุณุฌูุงุช ุงููุดุงุท ุงูุชุฌุฑูุจูุฉ
   TRUNCATE TABLE activity_log;
   ```
   - ูุฐู ูููุฑุงูุจุฉ ูุงูุชุฏููู - ุงุจุฏุฃ ูู ุตูุฑ

### 10. **ุงููุงุด ูุงููุธุงุฆู** (ุฌุฏุงูู: `cache`, `jobs`, `failed_jobs`)
   ```sql
   -- ุงูุณุญ ุงููุงุด
   TRUNCATE TABLE cache;
   TRUNCATE TABLE cache_locks;
   
   -- ุงูุณุญ ุงููุธุงุฆู
   TRUNCATE TABLE jobs;
   TRUNCATE TABLE failed_jobs;
   TRUNCATE TABLE job_batches;
   ```

---

## ๐ง ุทุฑููุฉ ุงูุชูููุฐ

### ุงูุทุฑููุฉ 1: ุณูุฑูุจุช SQL ุดุงูู (ููุตู ุจู)

ุฅูุดุงุก ููู `database/scripts/clean_for_client.sql`:

```sql
-- ุชูุธูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ูุจู ุงูุชุณููู ููุนููู
-- ุชุญุฐูุฑ: ูุฐุง ุงูุณูุฑูุจุช ุณูุญุฐู ุฌููุน ุงูุจูุงูุงุช ุงูุชุฌุฑูุจูุฉ!

-- 1. ุงูุจูุงูุงุช ุงูุชุดุบูููุฉ
TRUNCATE TABLE attendance_records;
TRUNCATE TABLE day_locks;
TRUNCATE TABLE monthly_settings;
TRUNCATE TABLE official_holidays;
TRUNCATE TABLE attendance_status_history;

-- 2. ุงูุจูุงูุงุช ุงูุฃุณุงุณูุฉ
TRUNCATE TABLE employees;

-- 3. ุงููุณุชุฎุฏููู ูุงูุฃูุณุงู
TRUNCATE TABLE department_user;
TRUNCATE TABLE model_has_roles;
TRUNCATE TABLE users;
TRUNCATE TABLE departments;

-- 4. ุงูุณุฌูุงุช ูุงููุงุด
TRUNCATE TABLE activity_log;
TRUNCATE TABLE cache;
TRUNCATE TABLE cache_locks;
TRUNCATE TABLE jobs;
TRUNCATE TABLE failed_jobs;
TRUNCATE TABLE job_batches;

-- ููุงุญุธุฉ: ุงูุฃุฏูุงุฑ ูุงูุตูุงุญูุงุช ูุญุงูุงุช ุงูุญุถูุฑ ุณุชุจูู ููุง ูู
```

ุชูููุฐ ุงูุณูุฑูุจุช:
```bash
# ุชุฃูุฏ ูู ุนูู ูุณุฎุฉ ุงุญุชูุงุทูุฉ ุฃููุงู!
php artisan db:backup

# ุซู ููุฐ ุงูุณูุฑูุจุช
mysql -u username -p database_name < database/scripts/clean_for_client.sql

# ุฃู ุจุงุณุชุฎุฏุงู artisan
php artisan db:wipe --force
php artisan migrate --force
php artisan db:seed --class=RolesAndPermissionsSeeder
php artisan db:seed --class=AttendanceStatusSeeder
```

### ุงูุทุฑููุฉ 2: ุงุณุชุฎุฏุงู Artisan Command ูุฎุตุต

ุฅูุดุงุก Command ุฌุฏูุฏ:
```bash
php artisan make:command PrepareForClient
```

ุงูููุฏ:
```php
<?php

namespace App\Console\Commands;

use Illuminate\Console\Command;
use Illuminate\Support\Facades\DB;

class PrepareForClient extends Command
{
    protected $signature = 'system:prepare-for-client {--confirm}';
    protected $description = 'ุชูุธูู ุงูุจูุงูุงุช ุงูุชุฌุฑูุจูุฉ ูุชุฌููุฒ ุงููุธุงู ููุชุณููู ููุนููู';

    public function handle()
    {
        if (!$this->option('confirm')) {
            $this->error('โ๏ธ  ุชุญุฐูุฑ: ูุฐุง ุงูุฃูุฑ ุณูุญุฐู ุฌููุน ุงูุจูุงูุงุช ุงูุชุฌุฑูุจูุฉ!');
            $this->warn('ููุชุฃููุฏุ ุงุณุชุฎุฏู: php artisan system:prepare-for-client --confirm');
            return 1;
        }

        if (!$this->confirm('ูู ุฃูุช ูุชุฃูุฏ ูู ุฃูู ุชุฑูุฏ ุญุฐู ุฌููุน ุงูุจูุงูุงุช ุงูุชุฌุฑูุจูุฉุ')) {
            $this->info('ุชู ุงูุฅูุบุงุก.');
            return 0;
        }

        $this->info('๐ ุจุฏุก ุชูุธูู ูุงุนุฏุฉ ุงูุจูุงูุงุช...');

        try {
            // ุนูู ูุณุฎุฉ ุงุญุชูุงุทูุฉ ุฃููุงู
            $this->call('backup:run', ['--only-db' => true]);

            DB::transaction(function () {
                // ุงูุจูุงูุงุช ุงูุชุดุบูููุฉ
                DB::table('attendance_records')->truncate();
                $this->info('โ ุชู ูุณุญ ุณุฌูุงุช ุงูุญุถูุฑ');

                DB::table('day_locks')->truncate();
                $this->info('โ ุชู ูุณุญ ุงูุฃูุงู ุงูููููุฉ');

                DB::table('monthly_settings')->truncate();
                $this->info('โ ุชู ูุณุญ ุงูุฅุนุฏุงุฏุงุช ุงูุดูุฑูุฉ');

                DB::table('official_holidays')->truncate();
                $this->info('โ ุชู ูุณุญ ุงูุนุทูุงุช ุงูุฑุณููุฉ');

                DB::table('attendance_status_history')->truncate();
                $this->info('โ ุชู ูุณุญ ุณุฌู ุงูุชุบููุฑุงุช');

                // ุงูุจูุงูุงุช ุงูุฃุณุงุณูุฉ
                DB::table('employees')->truncate();
                $this->info('โ ุชู ูุณุญ ุงูููุธููู');

                // ุงููุณุชุฎุฏููู ูุงูุฃูุณุงู
                DB::table('department_user')->truncate();
                DB::table('model_has_roles')->truncate();
                DB::table('users')->truncate();
                $this->info('โ ุชู ูุณุญ ุงููุณุชุฎุฏููู');

                DB::table('departments')->truncate();
                $this->info('โ ุชู ูุณุญ ุงูุฃูุณุงู');

                // ุงูุณุฌูุงุช ูุงููุงุด
                DB::table('activity_log')->truncate();
                $this->info('โ ุชู ูุณุญ ุณุฌูุงุช ุงููุดุงุท');

                DB::table('cache')->truncate();
                DB::table('cache_locks')->truncate();
                $this->info('โ ุชู ูุณุญ ุงููุงุด');

                DB::table('jobs')->truncate();
                DB::table('failed_jobs')->truncate();
                DB::table('job_batches')->truncate();
                $this->info('โ ุชู ูุณุญ ุงููุธุงุฆู');
            });

            $this->info('');
            $this->info('โ ุชู ุชูุธูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุจูุฌุงุญ!');
            $this->warn('โ๏ธ  ูุง ุชูุณู:');
            $this->warn('   1. ุฅูุดุงุก ูุณุชุฎุฏู admin ุฌุฏูุฏ ููุนููู');
            $this->warn('   2. ุฅูุดุงุก ุงูุฃูุณุงู ุงูุฎุงุตุฉ ุจุงูุนููู');
            $this->warn('   3. ูุฑุงุฌุนุฉ ููู .env ูุงูุชุฃูุฏ ูู ุงูุจูุงูุงุช');

            return 0;

        } catch (\Exception $e) {
            $this->error('โ ุญุฏุซ ุฎุทุฃ: ' . $e->getMessage());
            return 1;
        }
    }
}
```

ุงูุงุณุชุฎุฏุงู:
```bash
php artisan system:prepare-for-client --confirm
```

---

## ๐ ูุงุฆูุฉ ุงูุชุญูู ุงูููุงุฆูุฉ (Checklist)

ูุจู ุงูุชุณูููุ ุชุฃูุฏ ูู:

- [ ] **ูุณุฎุฉ ุงุญุชูุงุทูุฉ**: ุนูู backup ูุงูู ูู ุงููุงุนุฏุฉ ุงูุญุงููุฉ
- [ ] **ูุณุญ ุงูุจูุงูุงุช ุงูุชุฌุฑูุจูุฉ**: ุชูููุฐ ุณูุฑูุจุช ุงูุชูุธูู
- [ ] **ููู .env**: 
  - [ ] ุชุบููุฑ APP_ENV ุฅูู `production`
  - [ ] ุชุบููุฑ APP_DEBUG ุฅูู `false`
  - [ ] ุชุบููุฑ APP_KEY ุฅูู ููุชุงุญ ุฌุฏูุฏ
  - [ ] ุชุญุฏูุซ ุจูุงูุงุช ูุงุนุฏุฉ ุงูุจูุงูุงุช
  - [ ] ุชุญุฏูุซ ุจูุงูุงุช ุงูุจุฑูุฏ ุงูุฅููุชุฑููู (ุฅู ูุฌุฏุช)
- [ ] **ุงูุฃูุงู**:
  - [ ] ุชุบููุฑ ุฌููุน ูููุงุช ุงููุฑูุฑ ุงูุงูุชุฑุงุถูุฉ
  - [ ] ูุฑุงุฌุนุฉ ุตูุงุญูุงุช ุงููููุงุช ูุงููุฌูุฏุงุช
  - [ ] ุงูุชุฃูุฏ ูู ุนุฏู ูุฌูุฏ ููุงุชูุญ API ุชุฌุฑูุจูุฉ
- [ ] **ุฅูุดุงุก ูุณุชุฎุฏู admin ููุนููู**
- [ ] **ุชูุซูู**:
  - [ ] ุฏููู ุงูุงุณุชุฎุฏุงู ุจุงููุบุฉ ุงูุนุฑุจูุฉ
  - [ ] ุฏููู ุงูุชุซุจูุช ูุงูุฅุนุฏุงุฏ
  - [ ] ุจูุงูุงุช ุงูุฏุฎูู ุงูุฃูููุฉ ููุนููู
- [ ] **ุงุฎุชุจุงุฑ**:
  - [ ] ุงุฎุชุจุงุฑ ุชุณุฌูู ุงูุฏุฎูู
  - [ ] ุงุฎุชุจุงุฑ ุฅุถุงูุฉ ูุณู ูููุธู
  - [ ] ุงุฎุชุจุงุฑ ุชุณุฌูู ุญุถูุฑ
  - [ ] ุงุฎุชุจุงุฑ ุงูุชูุงุฑูุฑ

---

## ๐ฏ ููุงุญุธุงุช ูููุฉ

1. **ุงููุณุฎ ุงูุงุญุชูุงุทู**: ุฏุงุฆูุงู ุงุนูู ูุณุฎุฉ ุงุญุชูุงุทูุฉ ูุจู ุฃู ุนูููุฉ ุญุฐู!
   
2. **ุงููุณุชุฎุฏู ุงูุฃูู**: ุจุนุฏ ุงููุณุญุ ุณูุญุชุงุฌ ุงูุนููู ููุณุชุฎุฏู admin:
   ```bash
   php artisan tinker
   ```
   ```php
   DB::table('users')->insert([
       'name' => 'ูุฏูุฑ ุงููุธุงู',
       'email' => 'admin@company.com',
       'password' => Hash::make('password123'),
       'created_at' => now(),
       'updated_at' => now(),
   ]);
   
   $user = User::where('email', 'admin@company.com')->first();
   $user->assignRole('admin');
   ```

3. **ุงูุฅุนุฏุงุฏุงุช ุงูุฃุณุงุณูุฉ**: ุชุฃูุฏ ุฃู ุงูุนููู ูุนุฑู ููููุฉ:
   - ุฅุถุงูุฉ ุงูุฃูุณุงู
   - ุฅุถุงูุฉ ุงูููุธููู
   - ุถุจุท ุฃูุงู ุงูุนูู
   - ุฅุถุงูุฉ ุงูุนุทูุงุช ุงูุฑุณููุฉ
   - ุฅูุดุงุก ุงููุณุชุฎุฏููู ูุชุนููู ุงูุตูุงุญูุงุช

4. **ุงูุชุฑุฎูุต**: ูุง ุชูุณู ุฅุฒุงูุฉ ุฃู ูุนูููุงุช ุดุฎุตูุฉ ุฃู ุจูุงูุงุช ุงุชุตุงู ูู ุงูููุฏ

---

## ๐ ูุนูููุงุช ุฅุถุงููุฉ

- ุชุงุฑูุฎ ุงูุฅูุดุงุก: 2026-01-04
- ุงููุธุงู: Laravel Attendance System
- ุงูุฅุตุฏุงุฑ: 1.0
